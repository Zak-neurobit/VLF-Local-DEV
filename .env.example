# Vasquez Law Firm Website Environment Variables
# Copy this file to .env.local and fill in your values

# ===========================================
# CORE CONFIGURATION
# ===========================================
NODE_ENV=development
NEXT_PUBLIC_APP_URL=http://localhost:3000

# ===========================================
# DATABASE
# ===========================================
# Neon PostgreSQL connection string
# Format: postgresql://user:password@host:5432/database?sslmode=require
# Get this from your Neon dashboard
DATABASE_URL=postgresql://user:password@neon.tech/vasquez_law?sslmode=require

# ===========================================
# AUTHENTICATION
# ===========================================
# NextAuth.js configuration
NEXTAUTH_URL=http://localhost:3000
# Generate with: openssl rand -base64 32
NEXTAUTH_SECRET=your-nextauth-secret-here

# Google OAuth (optional)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# ===========================================
# REDIS/CACHING (REMOVED - Using Neon only)
# ===========================================
# Redis has been removed from this project.
# All caching is handled at the application level.
MOCK_REDIS=true

# ===========================================
# REVALIDATION
# ===========================================
# Secret token for on-demand ISR revalidation
# Generate with: openssl rand -base64 32
REVALIDATION_TOKEN=your-secret-revalidation-token

# ===========================================
# AI SERVICES
# ===========================================
# OpenAI API key for AI features (chatbot, content generation)
OPENAI_API_KEY=sk-your-openai-api-key

# ===========================================
# CREWAI CONFIGURATION
# ===========================================
# OpenAI Configuration for CrewAI Agents
OPENAI_MODEL=gpt-4  # or gpt-3.5-turbo for cost savings
OPENAI_MODEL_NAME=gpt-4  # Alias for compatibility

# CrewAI Core Settings
CREWAI_LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR
CREWAI_MAX_ITERATIONS=10  # Maximum iterations per task
CREWAI_TASK_TIMEOUT=300  # Task timeout in seconds (5 minutes)
CREWAI_MEMORY_ENABLED=true  # Enable agent memory
CREWAI_VERBOSE_MODE=false  # Set to true for detailed logging

# Agent Enablement Flags - Control which agents are active
CREWAI_LEAD_SCORER_ENABLED=true  # Lead scoring and prioritization
CREWAI_AUTO_RESPONDER_ENABLED=true  # Automated responses
CREWAI_APPOINTMENT_SCHEDULER_ENABLED=true  # Appointment booking
CREWAI_DOCUMENT_ANALYZER_ENABLED=true  # Document analysis
CREWAI_CASE_RESEARCHER_ENABLED=true  # Legal research
CREWAI_CONTENT_CREATOR_ENABLED=true  # Content generation
CREWAI_CLIENT_COMMUNICATOR_ENABLED=true  # Client communication
CREWAI_DATA_ANALYST_ENABLED=true  # Analytics and reporting
CREWAI_INTAKE_SPECIALIST_ENABLED=true  # Lead intake
CREWAI_FOLLOW_UP_SPECIALIST_ENABLED=true  # Follow-up automation

# Agent Performance Settings
CREWAI_LEAD_SCORER_PRIORITY=high  # Agent priority level
CREWAI_AUTO_RESPONDER_PRIORITY=high  # Agent priority level
CREWAI_APPOINTMENT_SCHEDULER_PRIORITY=medium  # Agent priority level
CREWAI_DOCUMENT_ANALYZER_PRIORITY=low  # Agent priority level

# Task Queue Configuration
CREWAI_QUEUE_MAX_SIZE=1000  # Maximum queued tasks
CREWAI_QUEUE_PROCESSING_INTERVAL=30  # Process queue every N seconds
CREWAI_PARALLEL_PROCESSING=true  # Enable parallel task execution
CREWAI_MAX_CONCURRENT_TASKS=5  # Maximum concurrent tasks

# Agent Memory Configuration
CREWAI_MEMORY_PROVIDER=local  # local, redis, or database
CREWAI_MEMORY_TTL=86400  # Memory TTL in seconds (24 hours)
CREWAI_CONTEXT_WINDOW=4000  # Token limit for context

# Error Handling & Reliability
CREWAI_RETRY_ATTEMPTS=3  # Number of retry attempts
CREWAI_RETRY_DELAY=5  # Delay between retries in seconds
CREWAI_FALLBACK_ENABLED=true  # Enable fallback to human handoff
CREWAI_ERROR_REPORTING=true  # Report errors to monitoring

# Integration Settings
CREWAI_GHL_INTEGRATION=true  # Enable GoHighLevel integration
CREWAI_RETELL_INTEGRATION=true  # Enable Retell AI integration
CREWAI_DATABASE_INTEGRATION=true  # Enable database operations

# ===========================================
# GOHIGHLEVEL INTEGRATION
# ===========================================
# Get these from GoHighLevel > Settings > API Keys
GHL_API_KEY=your-ghl-api-key  # Found in GHL Settings > API & Webhooks
GHL_LOCATION_ID=your-location-id  # Found in GHL Settings > Company
GHL_API_URL=https://rest.gohighlevel.com/v1  # Default API URL
GHL_WEBHOOK_SECRET=your-webhook-secret  # Generate unique value for webhook signature validation

# Lead Pipeline Configuration - Get from GHL > Pipelines
GHL_PIPELINE_ID=your-main-pipeline-id
GHL_LEAD_PIPELINE_ID=your-lead-pipeline-id  # Main lead tracking pipeline
GHL_NEW_LEAD_STAGE_ID=your-new-lead-stage-id  # Initial stage for new leads
GHL_NEW_LEADS_STAGE_ID=your-stage-id  # Alias for compatibility

# User/Team Configuration - Get from GHL > Team
GHL_SENIOR_USER_ID=senior-attorney-user-id  # Senior attorney for high-value leads
GHL_DEFAULT_USER_ID=default-user-id  # Default assignment

# Calendar Configuration - Get from GHL > Calendars
GHL_CALENDAR_ID=your-calendar-id  # Main appointment calendar

# Communication Settings
GHL_PHONE_ENABLED=true
GHL_SMS_ENABLED=true
GHL_OUTBOUND_PHONE_NUMBER=+18449673536  # 1-844-YO-PELEO
GHL_SMS_PHONE_NUMBER=+18449673536  # 1-844-YO-PELEO

# ===========================================
# GHL CAMPAIGN IDS - CORE NOTIFICATIONS
# ===========================================
# Create these campaigns in GHL > Marketing > Campaigns

# Primary Notification Campaigns
GHL_APPOINTMENT_REMINDER_CAMPAIGN_ID=  # 24hr and 1hr reminders
GHL_CASE_UPDATE_CAMPAIGN_ID=  # Case status updates
GHL_WELCOME_CAMPAIGN_ID=  # New contact welcome series
GHL_GENERAL_NOTIFICATION_CAMPAIGN_ID=  # General updates
GHL_AUTO_RESPONSE_CAMPAIGN_ID=  # Immediate auto-responses
GHL_PHONE_LEAD_CAMPAIGN_ID=  # Phone lead follow-up

# Lead Type Campaigns
GHL_HOT_LEAD_CAMPAIGN_ID=your-hot-lead-campaign-id  # Immediate response needed
GHL_WARM_LEAD_CAMPAIGN_ID=your-warm-lead-campaign-id  # Standard follow-up
GHL_CHAT_INQUIRY_CAMPAIGN_ID=  # Chat inquiry follow-up
GHL_CHAT_LEAD_CAMPAIGN_ID=  # Chat qualified lead
GHL_CHAT_FOLLOWUP_CAMPAIGN_ID=  # Chat re-engagement
GHL_NEW_LEAD_CAMPAIGN_ID=  # New web leads
GHL_EMERGENCY_LEAD_CAMPAIGN_ID=  # Emergency/urgent cases
GHL_URGENT_INQUIRY_CAMPAIGN_ID=  # Time-sensitive inquiries
GHL_APPOINTMENT_REQUEST_CAMPAIGN_ID=  # Appointment booking flow

# ===========================================
# GHL CAMPAIGN IDS - PRACTICE AREA NURTURE
# ===========================================
# Language-specific nurture campaigns by practice area

# Immigration Law Campaigns
GHL_IMMIGRATION_NURTURE_EN=  # English immigration nurture
GHL_IMMIGRATION_NURTURE_ES=  # Spanish immigration nurture
GHL_IMMIGRATION_CHAT_CAMPAIGN_ID=  # Immigration chat follow-up
GHL_IMMIGRATION_LEAD_CAMPAIGN_ID=  # Immigration lead nurture

# Personal Injury Campaigns
GHL_PERSONAL_INJURY_NURTURE_EN=  # English PI nurture
GHL_PERSONAL_INJURY_NURTURE_ES=  # Spanish PI nurture
GHL_PERSONAL_INJURY_CHAT_CAMPAIGN_ID=  # PI chat follow-up
GHL_PERSONAL_INJURY_LEAD_CAMPAIGN_ID=  # PI lead nurture

# Workers Compensation Campaigns
GHL_WORKERS_COMP_NURTURE_EN=  # English workers comp nurture
GHL_WORKERS_COMP_NURTURE_ES=  # Spanish workers comp nurture
GHL_WORKERS_COMP_CHAT_CAMPAIGN_ID=  # Workers comp chat
GHL_WORKERS_COMP_LEAD_CAMPAIGN_ID=  # Workers comp lead

# Criminal Defense Campaigns
GHL_CRIMINAL_NURTURE_EN=  # English criminal defense nurture
GHL_CRIMINAL_NURTURE_ES=  # Spanish criminal defense nurture
GHL_CRIMINAL_DEFENSE_CHAT_CAMPAIGN_ID=  # Criminal chat
GHL_CRIMINAL_DEFENSE_LEAD_CAMPAIGN_ID=  # Criminal lead

# Family Law Campaigns
GHL_FAMILY_LAW_NURTURE_EN=  # English family law nurture
GHL_FAMILY_LAW_NURTURE_ES=  # Spanish family law nurture
GHL_FAMILY_LAW_CHAT_CAMPAIGN_ID=  # Family law chat
GHL_FAMILY_LAW_LEAD_CAMPAIGN_ID=  # Family law lead

# Traffic Law Campaigns
GHL_TRAFFIC_NURTURE_EN=  # English traffic law nurture
GHL_TRAFFIC_NURTURE_ES=  # Spanish traffic law nurture

# Generic/Fallback Campaign
GHL_GENERIC_NURTURE_CAMPAIGN_ID=  # Default nurture for unspecified areas

# ===========================================
# GHL CAMPAIGN IDS - ENGAGEMENT & RETENTION
# ===========================================

# Re-engagement Campaigns
GHL_SURVEY_CAMPAIGN_ID=  # Client satisfaction surveys
GHL_BIRTHDAY_CAMPAIGN_ID=  # Birthday greetings
GHL_ANNIVERSARY_CAMPAIGN_ID=  # Case anniversary follow-ups
GHL_REENGAGEMENT_CAMPAIGN_ID=  # Win-back inactive contacts
GHL_REVIEW_REQUEST_CAMPAIGN_ID=  # Request Google/client reviews
GHL_WINBACK_CAMPAIGN_ID=  # Re-engage lost opportunities

# Voice Call Follow-up Campaigns
GHL_APPOINTMENT_SCHEDULED_CAMPAIGN_ID=  # Post-scheduling confirmation
GHL_VOICEMAIL_FOLLOWUP_CAMPAIGN_ID=  # Voicemail follow-up sequence
GHL_POST_CALL_SMS_CAMPAIGN_ID=  # SMS after phone calls
GHL_NO_ANSWER_FOLLOWUP_CAMPAIGN_ID=  # Missed call follow-up

# Holiday Campaigns
GHL_NEW_YEAR_CAMPAIGN_ID=  # New Year greetings
GHL_THANKSGIVING_CAMPAIGN_ID=  # Thanksgiving messages
GHL_CHRISTMAS_CAMPAIGN_ID=  # Christmas greetings
GHL_JULY4_CAMPAIGN_ID=  # July 4th messages
GHL_HISPANIC_HERITAGE_CAMPAIGN_ID=  # Hispanic Heritage Month

# Educational Content Campaigns
GHL_EDUCATIONAL_IMMIGRATION_CAMPAIGN_ID=  # Immigration tips & updates
GHL_EDUCATIONAL_PERSONALINJURY_CAMPAIGN_ID=  # PI education series
GHL_EDUCATIONAL_CRIMINAL_CAMPAIGN_ID=  # Know your rights series
GHL_EDUCATIONAL_FAMILY_CAMPAIGN_ID=  # Family law guides
GHL_EDUCATIONAL_WORKERSCOMP_CAMPAIGN_ID=  # Workplace safety tips

# ===========================================
# VOICE SERVICES (RETELL AI)
# ===========================================
# Get these from https://dashboard.retellai.com
RETELL_API_KEY=2996bc9f-ca4e-422a-b64e-a09a3eaa9bc0  # Your Retell API key
RETELL_WEBHOOK_SECRET=2996bc9f-ca4e-422a-b64e-a09a3eaa9bc0  # For webhook validation
RETELL_API_URL=https://api.retellai.com  # Default API URL

# Retell Voice Agent IDs - Create these in Retell Dashboard
# Each agent should be configured with specific prompts and behaviors
RETELL_AGENT_ENGLISH_INTAKE=  # English intake specialist
RETELL_AGENT_SPANISH_INTAKE=  # Spanish intake specialist
RETELL_AGENT_APPOINTMENT_SCHEDULER=  # Appointment booking agent
RETELL_AGENT_LEAD_QUALIFIER=  # Lead qualification agent
RETELL_AGENT_INTAKE_SPECIALIST=  # General intake agent
RETELL_AGENT_CASE_STATUS=  # Case status inquiry agent
RETELL_AGENT_EMERGENCY_HANDLER=  # Emergency/urgent case handler
RETELL_AGENT_PAYMENT_PROCESSOR=  # Payment inquiry agent
RETELL_AGENT_GENERAL_SUPPORT=  # General support agent

# Voice Configuration
RETELL_VOICE_MODEL=eleven_turbo_v2  # Voice model to use
RETELL_VOICE_ID=  # Specific voice ID if customized
RETELL_VOICE_LANGUAGE=en-US  # Default language
RETELL_VOICE_TEMPERATURE=0.7  # Response creativity (0-1)

# Call Settings
RETELL_MAX_CALL_DURATION=1800  # Max call duration in seconds (30 min)
RETELL_IDLE_TIMEOUT=10  # Seconds of silence before ending call
RETELL_INTERRUPTION_THRESHOLD=500  # Ms before allowing interruption

# Integration Settings
RETELL_WEBHOOK_URL=https://www.vasquezlawnc.com/api/webhooks/retell
RETELL_CALL_STATUS_WEBHOOK=https://www.vasquezlawnc.com/api/webhooks/retell/status
# Note: We use GHL phone numbers, not Retell's
# RETELL_PHONE_NUMBER=+1234567890  # Not needed - using GHL numbers

# ===========================================
# EMAIL CONFIGURATION
# ===========================================
# Primary Email Service Configuration
# Choose ONE of the following email providers:

# Option 1: Office 365 / Microsoft 365
OFFICE365_EMAIL=info@vasquezlawnc.com
OFFICE365_PASSWORD=your-office365-app-password  # Use app password, not regular password

# Option 2: Generic SMTP Configuration
# Works with Gmail, SendGrid, Mailgun, etc.
EMAIL_FROM=info@vasquezlawnc.com  # The "from" address for all emails
SMTP_HOST=smtp.office365.com  # Your SMTP server
SMTP_PORT=587  # Usually 587 for TLS, 465 for SSL, 25 for unencrypted
SMTP_SECURE=false  # true for 465, false for other ports
SMTP_USER=info@vasquezlawnc.com  # SMTP username (often same as email)
SMTP_PASSWORD=your-smtp-password  # SMTP password or app password
SMTP_PASS=your-smtp-password  # Alias for SMTP_PASSWORD

# Email Routing Configuration
# These determine where different types of emails are sent
CONTACT_EMAIL=leads@vasquezlawfirm.com  # Where contact form submissions go
ATTORNEY_EMAIL=attorneys@vasquezlawnc.com  # Where case evaluations go
URGENT_LEAD_EMAILS=attorney1@vasquezlawnc.com,attorney2@vasquezlawnc.com  # Comma-separated list for urgent leads

# Development/Testing Flags
MOCK_EMAIL=false  # Set to true to log emails instead of sending (dev only)
MOCK_SMS=false  # Set to true to log SMS instead of sending (dev only)
DISABLE_EMAIL_SERVICE=false  # Set to true to completely disable email service

# ===========================================
# EMAIL SETUP INSTRUCTIONS
# ===========================================
# 1. GMAIL SETUP:
#    - Enable 2FA on your Google account
#    - Generate app password: https://myaccount.google.com/apppasswords
#    - Use: SMTP_HOST=smtp.gmail.com, SMTP_PORT=587, SMTP_USER=your-email@gmail.com
#    - SMTP_PASSWORD=your-16-character-app-password
#
# 2. OFFICE 365 SETUP:
#    - Enable 2FA on your Microsoft account
#    - Generate app password: https://account.microsoft.com/security
#    - Use: SMTP_HOST=smtp.office365.com, SMTP_PORT=587
#    - SMTP_USER=your-email@domain.com, SMTP_PASSWORD=your-app-password
#
# 3. SENDGRID SETUP:
#    - Create API key at https://app.sendgrid.com/settings/api_keys
#    - Use: SMTP_HOST=smtp.sendgrid.net, SMTP_PORT=587
#    - SMTP_USER=apikey (literally "apikey"), SMTP_PASSWORD=your-api-key
#
# 4. DEVELOPMENT SETUP:
#    - For local development without email: MOCK_EMAIL=true
#    - This will log emails to console instead of sending
#
# 5. PRODUCTION REQUIREMENTS:
#    - Always use app passwords, never regular passwords
#    - Set up SPF, DKIM, and DMARC records for deliverability
#    - Monitor bounce rates and adjust accordingly
#    - Consider using a transactional email service for reliability

# ===========================================
# PAYMENT PROCESSING
# ===========================================
# Authorize.Net
AUTHORIZENET_LOGIN_ID=your-authnet-login-id
AUTHORIZENET_TRANSACTION_KEY=your-authnet-transaction-key

# LawPay
LAWPAY_PUBLIC_KEY=your-lawpay-public-key
LAWPAY_SECRET_KEY=your-lawpay-secret-key
LAWPAY_TRUST_ACCOUNT_ID=your-trust-account-id
LAWPAY_OPERATING_ACCOUNT_ID=your-operating-account-id

# Stripe (removed - use LawPay or Authorize.Net instead)

# ===========================================
# HODOS PLATFORM INTEGRATION
# ===========================================
HODOS_API_URL=http://localhost:3001
HODOS_API_KEY=your-hodos-api-key
HODOS_WEBSOCKET_URL=ws://localhost:3001

# ===========================================
# GOOGLE SERVICES
# ===========================================
# Google Search API
GOOGLE_SEARCH_API_KEY=your-google-search-api-key
GOOGLE_SEARCH_ENGINE_ID=your-search-engine-id

# Google Maps
GOOGLE_MAPS_API_KEY=your-google-maps-api-key
NEXT_PUBLIC_GOOGLE_MAPS_API_KEY=your-google-maps-api-key

# Google Places API (for reviews)
GOOGLE_PLACES_API_KEY=your-google-places-api-key

# Google Analytics
GOOGLE_ANALYTICS_ID=G-XXXXXXXXXX

# ===========================================
# REVIEW APIS
# ===========================================
# Google Places API for business reviews (already defined above)

# ===========================================
# MONITORING & ERROR TRACKING
# ===========================================
# Sentry DSN for error tracking
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_AUTH_TOKEN=your-sentry-auth-token # Required for source map upload to Sentry

# ===========================================
# DEVELOPMENT FLAGS
# ===========================================
# Skip environment variable validation (not recommended)
SKIP_ENV_VALIDATION=false

# ===========================================
# SETUP INSTRUCTIONS
# ===========================================

# 1. GOHIGHLEVEL SETUP:
#    a. Log in to your GoHighLevel account
#    b. Go to Settings > API & Webhooks to get GHL_API_KEY
#    c. Go to Settings > Company to get GHL_LOCATION_ID
#    d. Create campaigns for each practice area and notification type
#    e. Set up webhooks in GHL pointing to: https://www.vasquezlawnc.com/api/webhooks/ghl
#    f. Configure pipelines and stages for lead management
#    g. Set up calendars for appointment scheduling

# 2. RETELL AI SETUP:
#    a. Sign up at https://dashboard.retellai.com
#    b. Get your API key from the dashboard
#    c. Create voice agents for each use case (intake, scheduler, etc.)
#    d. Copy agent IDs to corresponding RETELL_AGENT_* variables
#    e. Configure webhook URLs in Retell dashboard:
#       - Call Events: https://www.vasquezlawnc.com/api/webhooks/retell
#       - Status Updates: https://www.vasquezlawnc.com/api/webhooks/retell/status

# 3. OPENAI SETUP:
#    a. Get API key from https://platform.openai.com
#    b. Set usage limits to control costs
#    c. Consider using GPT-3.5-turbo for development (cheaper)
#    d. Monitor usage in OpenAI dashboard

# 4. DATABASE SETUP:
#    a. Create PostgreSQL database
#    b. Update DATABASE_URL with connection string
#    c. Run migrations: npm run db:migrate
#    d. Seed initial data: npm run db:seed

# 5. CREWAI CONFIGURATION:
#    a. Start with basic agents enabled (lead scorer, auto responder)
#    b. Enable additional agents as needed
#    c. Monitor task queue and adjust CREWAI_MAX_CONCURRENT_TASKS
#    d. Set CREWAI_VERBOSE_MODE=true for debugging

# 6. WEBHOOK CONFIGURATION:
#    a. Run: npm run configure-webhooks
#    b. Follow the generated instructions for each service
#    c. Test webhooks with ngrok for local development:
#       ngrok http 3000
#    d. Update webhook URLs in service dashboards

# 7. SECURITY CHECKLIST:
#    a. Generate all secrets with: openssl rand -base64 32
#    b. Never commit actual values to git
#    c. Use different values for each environment
#    d. Set up proper CORS origins
#    e. Configure rate limiting

# 8. TESTING:
#    a. Set NODE_ENV=development for local development
#    b. Use TEST_MODE=true to bypass external APIs during testing
#    c. Test each integration separately before enabling all
#    d. Monitor logs for errors and performance issues

# 9. DEPLOYMENT:
#    a. Set all production values in your hosting platform
#    b. Update webhook URLs to production domain
#    c. Test all integrations in production environment
#    d. Set up monitoring and error tracking

# 10. MONITORING:
#     a. Configure Sentry for error tracking
#     b. Set up Google Analytics
#     c. Monitor API usage and costs
#     d. Set up alerts for critical failures
# ===========================================
# GOOGLE CLOUD (CrewAI Integration)
# ===========================================
# Path to service account credentials JSON file
GOOGLE_APPLICATION_CREDENTIALS=
# Google Cloud project ID
GOOGLE_CLOUD_PROJECT=
# Service account email
GOOGLE_SERVICE_ACCOUNT_EMAIL=
# Alternative: Base64 encoded credentials (more secure for deployment)
# GOOGLE_CREDENTIALS_BASE64=
