groups:\n  - name: socket_server_alerts\n    rules:\n      # High Response Time\n      - alert: SocketHighResponseTime\n        expr: socket_health_response_time_ms > 2000\n        for: 2m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"Socket server response time is high\"\n          description: \"Socket server response time is {{ $value }}ms, which is above the 2000ms threshold\"\n      \n      # Critical Response Time\n      - alert: SocketCriticalResponseTime\n        expr: socket_health_response_time_ms > 5000\n        for: 1m\n        labels:\n          severity: critical\n        annotations:\n          summary: \"Socket server response time is critical\"\n          description: \"Socket server response time is {{ $value }}ms, which is above the 5000ms threshold\"\n      \n      # Server Down\n      - alert: SocketServerDown\n        expr: up{job=\"socket_health\"} == 0\n        for: 1m\n        labels:\n          severity: critical\n        annotations:\n          summary: \"Socket server is down\"\n          description: \"Socket server has been down for more than 1 minute\"\n      \n      # High Error Rate\n      - alert: SocketHighErrorRate\n        expr: socket_health_error_rate_percent > 5\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"Socket server error rate is high\"\n          description: \"Socket server error rate is {{ $value }}%, which is above the 5% threshold\"\n      \n      # Critical Error Rate\n      - alert: SocketCriticalErrorRate\n        expr: socket_health_error_rate_percent > 10\n        for: 2m\n        labels:\n          severity: critical\n        annotations:\n          summary: \"Socket server error rate is critical\"\n          description: \"Socket server error rate is {{ $value }}%, which is above the 10% threshold\"\n      \n      # High Memory Usage\n      - alert: SocketHighMemoryUsage\n        expr: socket_health_memory_usage_percent > 80\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"Socket server memory usage is high\"\n          description: \"Socket server memory usage is {{ $value }}%, which is above the 80% threshold\"\n      \n      # Critical Memory Usage\n      - alert: SocketCriticalMemoryUsage\n        expr: socket_health_memory_usage_percent > 90\n        for: 2m\n        labels:\n          severity: critical\n        annotations:\n          summary: \"Socket server memory usage is critical\"\n          description: \"Socket server memory usage is {{ $value }}%, which is above the 90% threshold\"\n      \n      # High Connection Count\n      - alert: SocketHighConnectionCount\n        expr: socket_health_active_connections > 1000\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"Socket server has high connection count\"\n          description: \"Socket server has {{ $value }} active connections, which is above the 1000 threshold\"\n      \n      # Server Unhealthy\n      - alert: SocketServerUnhealthy\n        expr: socket_health_status == 2\n        for: 1m\n        labels:\n          severity: critical\n        annotations:\n          summary: \"Socket server is in unhealthy state\"\n          description: \"Socket server health check is reporting unhealthy status\"\n      \n      # Server Degraded\n      - alert: SocketServerDegraded\n        expr: socket_health_status == 1\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"Socket server is in degraded state\"\n          description: \"Socket server health check is reporting degraded status\"\n      \n      # Low Authenticated Connection Ratio\n      - alert: SocketLowAuthRatio\n        expr: (socket_health_authenticated_connections / socket_health_active_connections) < 0.3\n        for: 10m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"Socket server has low authenticated connection ratio\"\n          description: \"Only {{ $value | humanizePercentage }} of connections are authenticated\"\n  \n  - name: system_alerts\n    rules:\n      # High CPU Usage\n      - alert: HighCPUUsage\n        expr: 100 - (avg by(instance) (irate(node_cpu_seconds_total{mode=\"idle\"}[5m])) * 100) > 80\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"High CPU usage detected\"\n          description: \"CPU usage is {{ $value }}% on {{ $labels.instance }}\"\n      \n      # High Memory Usage\n      - alert: HighMemoryUsage\n        expr: (1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes)) * 100 > 80\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"High memory usage detected\"\n          description: \"Memory usage is {{ $value }}% on {{ $labels.instance }}\"\n      \n      # High Disk Usage\n      - alert: HighDiskUsage\n        expr: (1 - (node_filesystem_avail_bytes / node_filesystem_size_bytes)) * 100 > 80\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"High disk usage detected\"\n          description: \"Disk usage is {{ $value }}% on {{ $labels.instance }} {{ $labels.mountpoint }}\"\n      \n      # Redis Connection Issues\n      - alert: RedisDown\n        expr: redis_up == 0\n        for: 1m\n        labels:\n          severity: critical\n        annotations:\n          summary: \"Redis is down\"\n          description: \"Redis server is not responding\"\n      \n      # High Redis Memory Usage\n      - alert: RedisHighMemoryUsage\n        expr: (redis_memory_used_bytes / redis_memory_max_bytes) * 100 > 80\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"Redis memory usage is high\"\n          description: \"Redis memory usage is {{ $value }}%\""